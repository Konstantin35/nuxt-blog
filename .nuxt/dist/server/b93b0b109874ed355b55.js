exports.ids=[6],exports.modules={107:function(t,e,r){var content=r(119);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=r(3).default;t.exports.__inject__=function(t){o("3e942c8f",content,!0,t)}},118:function(t,e,r){"use strict";r.r(e);var o=r(107),n=r.n(o);for(var l in o)"default"!==l&&function(t){r.d(e,t,function(){return o[t]})}(l);e.default=n.a},119:function(t,e,r){(t.exports=r(2)(!1)).push([t.i,".page-wrap form[data-v-886cae46]{width:600px}.mr[data-v-886cae46]{margin-right:2rem}",""])},136:function(t,e,r){"use strict";r.r(e);var o={name:"admin-post",middleware:["admin-auth"],head(){return{title:`${this.post.title} | SSR Blog`}},validate:({params:t})=>Boolean(t.id),layout:"admin",asyncData:async({store:t,params:e})=>({post:await t.dispatch("post/fetchAdminPostById",e.id)}),data:()=>({loading:!1,controls:{text:""},rules:{text:[{required:!0,message:"Текст не должен быть пустым",trigger:"blur"}]}}),mounted(){this.controls.text=this.post.text},methods:{onSubmit(){this.$refs.form.validate(async t=>{if(t){this.loading=!0;try{const t={text:this.controls.text,id:this.post._id};await this.$store.dispatch("post/update",t),this.$message.success("Пост успешно обновлен"),this.loading=!1}catch(t){this.loading=!1,this.$message.error("Ошибка при обновлении поста")}}})}}},n=r(1);var component=Object(n.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-wrap"},[r("el-breadcrumb",{staticClass:"mb",attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:"/admin/list"}},[t._v("\n      Посты\n    ")]),t._v(" "),r("el-breadcrumb-item",[t._v(t._s(t.post.title))])],1),t._ssrNode(" "),r("el-form",{ref:"form",attrs:{model:t.controls,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"mb2"},[r("el-form-item",{attrs:{label:"Текст в формате .md или .html",prop:"text"}},[r("el-input",{attrs:{type:"textarea",resize:"none",rows:30},model:{value:t.controls.text,callback:function(e){t.$set(t.controls,"text",e)},expression:"controls.text"}})],1)],1),t._v(" "),r("div",{staticClass:"mb"},[r("small",{staticClass:"mr"},[r("i",{staticClass:"el-icon-time"}),t._v(" "),r("span",[t._v(t._s(t._f("date")(t.post.date)))])]),t._v(" "),r("small",[r("i",{staticClass:"el-icon-view"}),t._v(" "),r("span",[t._v(t._s(t.post.views))])])]),t._v(" "),r("el-form-item",[r("el-button",{attrs:{"native-type":"submit",type:"primary",round:"",loading:t.loading}},[t._v("\n        Обновить\n      ")])],1)],1)],2)},[],!1,function(t){var e=r(118);e.__inject__&&e.__inject__(t)},"886cae46","144c7acf");e.default=component.exports}};
//# sourceMappingURL=b93b0b109874ed355b55.js.map