exports.ids=[9],exports.modules={108:function(t,e,o){var content=o(121);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(3).default;t.exports.__inject__=function(t){n("e51c18aa",content,!0,t)}},109:function(t,e,o){var content=o(123);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(3).default;t.exports.__inject__=function(t){n("7e920936",content,!0,t)}},110:function(t,e,o){var content=o(125);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var n=o(3).default;t.exports.__inject__=function(t){n("53a22daa",content,!0,t)}},120:function(t,e,o){"use strict";o.r(e);var n=o(108),r=o.n(n);for(var c in n)"default"!==c&&function(t){o.d(e,t,function(){return n[t]})}(c);e.default=r.a},121:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".comment[data-v-ab24b07c]{margin-bottom:1rem}.comment-header[data-v-ab24b07c]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.8rem}.comment-header .el-icon-time[data-v-ab24b07c]{margin-right:3px}.comment-text[data-v-ab24b07c]{white-space:pre-line;margin-top:0;margin-bottom:0}",""])},122:function(t,e,o){"use strict";o.r(e);var n=o(109),r=o.n(n);for(var c in n)"default"!==c&&function(t){o.d(e,t,function(){return n[t]})}(c);e.default=r.a},123:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".comment-form-title[data-v-41a594dc]{margin-bottom:1rem}",""])},124:function(t,e,o){"use strict";o.r(e);var n=o(110),r=o.n(n);for(var c in n)"default"!==c&&function(t){o.d(e,t,function(){return n[t]})}(c);e.default=r.a},125:function(t,e,o){(t.exports=o(2)(!1)).push([t.i,".post[data-v-2c5415a2]{max-width:600px;margin-left:auto;margin-right:auto}.post-header[data-v-2c5415a2]{margin-bottom:1.5rem}.post-title[data-v-2c5415a2]{margin-bottom:1rem}.post-info[data-v-2c5415a2],.post-title[data-v-2c5415a2]{display:flex;justify-content:space-between;align-items:center}.post-info[data-v-2c5415a2]{margin-bottom:.5rem}.post-image img[data-v-2c5415a2]{width:100%;height:auto}.post-content[data-v-2c5415a2]{margin-bottom:2rem;line-height:1.4}.post-content[data-v-2c5415a2] p{margin-bottom:.5rem}.post-content[data-v-2c5415a2] ul{padding-left:20px;margin-bottom:1rem}",""])},128:function(t,e,o){"use strict";o.r(e);var n={name:"Comment",props:{comment:{type:Object,required:!0}}},r=o(1);var c=Object(r.a)(n,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-card",{staticClass:"comment"},[o("header",{staticClass:"comment-header"},[o("span",[t._v(t._s(t.comment.name))]),t._v(" "),o("span",[o("i",{staticClass:"el-icon-time"}),t._v(t._s(t._f("date")(t.comment.date,"date"))+"\n    ")])]),t._v(" "),o("p",{staticClass:"comment-text"},[t._v("\n    "+t._s(t.comment.text)+"\n  ")])])},[],!1,function(t){var e=o(120);e.__inject__&&e.__inject__(t)},"ab24b07c","7756b539").exports,m={name:"CommentForm",props:{postId:{type:String,required:!0}},data:()=>({loading:!1,controls:{name:"",text:""},rules:{name:[{required:!0,message:"Имя не должно быть пустым",trigger:"blur"}],text:[{required:!0,message:"Введи ваш комментарий",trigger:"blur"}]}}),methods:{onSubmit(){this.$refs.form.validate(async t=>{if(t){this.loading=!0;const t={postId:this.postId,name:this.controls.name,text:this.controls.text};try{const e=await this.$store.dispatch("comment/create",t);this.$emit("created",e),this.$message.success("Комментарий добавлен")}catch(t){this.loading=!1}}})}}};var d={components:{Comment:c,CommentForm:Object(r.a)(m,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-form",{ref:"form",attrs:{model:t.controls,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[o("h2",{staticClass:"comment-form-title"},[t._v("Добавить комментарий")]),t._v(" "),o("el-form-item",{attrs:{label:"Ваше имя",prop:"name"}},[o("el-input",{model:{value:t.controls.name,callback:function(e){t.$set(t.controls,"name",e)},expression:"controls.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Текст комментария",prop:"text"}},[o("el-input",{attrs:{type:"textarea",resize:"none",rows:2},model:{value:t.controls.text,callback:function(e){t.$set(t.controls,"text",e)},expression:"controls.text"}})],1),t._v(" "),o("el-form-item",[o("el-button",{attrs:{"native-type":"submit",type:"primary",round:"",loading:t.loading}},[t._v("Добавить комментарий")])],1)],1)},[],!1,function(t){var e=o(122);e.__inject__&&e.__inject__(t)},"41a594dc","1c50eb9d").exports},validate:({params:t})=>Boolean(t.id),head(){return{title:`${this.post.title} | SSR Blog`}},async asyncData({store:t,params:e}){const o=await t.dispatch("post/fetchPostsById",e.id);return await t.dispatch("post/addView",o),{post:{...o,views:++o.views}}},data:()=>({canAddComment:!0}),methods:{createCommentHandler(t){this.post.comments.unshift(t),this.canAddComment=!1}}};var l=Object(r.a)(d,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("article",{staticClass:"post"},[t._ssrNode('<header slot="header" class="post-header" data-v-2c5415a2>',"</header>",[t._ssrNode('<div class="post-title" data-v-2c5415a2>',"</div>",[t._ssrNode("<h1 data-v-2c5415a2>"+t._ssrEscape(t._s(t.post.title))+"</h1> "),o("nuxt-link",{attrs:{to:"/"}},[o("i",{staticClass:"el-icon-back"})])],2),t._ssrNode(' <div class="post-info" data-v-2c5415a2><small data-v-2c5415a2><i class="el-icon-time" data-v-2c5415a2></i>'+t._ssrEscape("\n        "+t._s(t._f("date")(t.post.date))+"\n      ")+'</small> <small data-v-2c5415a2><i class="el-icon-view" data-v-2c5415a2></i>'+t._ssrEscape("\n        "+t._s(t.post.views)+"\n      ")+"</small></div> <img"+t._ssrAttr("src",t.post.imageUrl)+t._ssrAttr("alt",t.post.title)+' class="post-image" data-v-2c5415a2>')],2),t._ssrNode(" "),t._ssrNode('<main class="post-content" data-v-2c5415a2>',"</main>",[o("vue-markdown",[t._v(t._s(t.post.text))])],1),t._ssrNode(" "),t._ssrNode("<footer data-v-2c5415a2>","</footer>",[t.canAddComment?o("comment-form",{attrs:{"post-id":t.post._id},on:{created:function(e){return t.createCommentHandler(e)}}}):t._e(),t._ssrNode(" "),t.post.comments.length?t._ssrNode('<div class="comments" data-v-2c5415a2>',"</div>",t._l(t.post.comments,function(t){return o("comment",{key:t._id,attrs:{comment:t}})}),1):t._ssrNode('<div class="text-center" data-v-2c5415a2>\n      Комментариев нет\n    </div>')],2)],2)},[],!1,function(t){var e=o(124);e.__inject__&&e.__inject__(t)},"2c5415a2","6bd3f5e2");e.default=l.exports}};
//# sourceMappingURL=be55630f266eaf67de72.js.map