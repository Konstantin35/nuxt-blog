exports.ids=[1],exports.modules={104:function(t,e,l){var content=l(113);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);var o=l(3).default;t.exports.__inject__=function(t){o("3c9595eb",content,!0,t)}},112:function(t,e,l){"use strict";l.r(e);var o=l(104),r=l.n(o);for(var n in o)"default"!==n&&function(t){l.d(e,t,function(){return o[t]})}(n);e.default=r.a},113:function(t,e,l){(t.exports=l(2)(!1)).push([t.i,"form[data-v-3cc835ca]{width:600px}",""])},131:function(t,e,l){"use strict";l.r(e);var o={middleware:["admin-auth"],layout:"admin",name:"create",head:{title:"Создать новый пост | SSR Blog"},data:()=>({loading:!1,previewDialog:!1,image:null,controls:{title:"",text:""},rules:{title:[{required:!0,message:"Название поста не может быть пустым",trigger:"blur"}],text:[{required:!0,message:"Текст не должен быть пустым",trigger:"blur"}]}}),methods:{onSubmit(){this.$refs.form.validate(async t=>{if(t&&this.image){this.loading=!0;try{const t={title:this.controls.title,text:this.controls.text,image:this.image};await this.$store.dispatch("post/create",t),this.$message.success("Пост успешно создан"),this.clearFormData()}catch(t){this.$message.error("Ошибка при создании поста")}finally{this.loading=!1}}else this.$message.warning("Форма не валидна")})},clearFormData(){this.controls.title="",this.controls.text="",this.controls.image=null,this.$refs.upload.clearFiles()},handleImageChange(t,e){this.image=e[0].raw}}},r=l(1);var component=Object(r.a)(o,function(){var t=this,e=t.$createElement,l=t._self._c||e;return l("el-form",{ref:"form",attrs:{model:t.controls,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[l("h1",{staticClass:"mb"},[t._v("Создать новый пост")]),t._v(" "),l("div",{staticClass:"mb2"},[l("el-form-item",{attrs:{label:"Введите название поста",prop:"text"}},[l("el-input",{model:{value:t.controls.title,callback:function(e){t.$set(t.controls,"title",e)},expression:"controls.title"}})],1)],1),t._v(" "),l("div",{staticClass:"mb2"},[l("el-form-item",{attrs:{label:"Текст в формате .md или .html",prop:"text"}},[l("el-input",{attrs:{type:"textarea",resize:"none",rows:30},model:{value:t.controls.text,callback:function(e){t.$set(t.controls,"text",e)},expression:"controls.text"}})],1)],1),t._v(" "),l("div",{staticClass:"mb2"},[l("el-button",{attrs:{type:"success",plain:""},on:{click:function(e){t.previewDialog=!0}}},[t._v("\n      Предпросмотр\n    ")]),t._v(" "),l("el-dialog",{attrs:{title:"Предпросмотр",visible:t.previewDialog},on:{"update:visible":function(e){t.previewDialog=e}}},[l("div",{key:t.controls.text},[l("vue-markdown",[t._v(t._s(t.controls.text))])],1)])],1),t._v(" "),l("el-upload",{ref:"upload",staticClass:"mb2",attrs:{drag:"",action:"https://jsonplaceholder.typicode.com/posts/","on-change":t.handleImageChange,"auto-upload":!1}},[l("i",{staticClass:"el-icon-upload"}),t._v(" "),l("div",{staticClass:"el-upload__text"},[t._v("Перетащите картинку "),l("em",[t._v("или нажмите")])]),t._v(" "),l("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("Файлы с расширением jpg/png")])]),t._v(" "),l("el-form-item",[l("el-button",{attrs:{"native-type":"submit",type:"primary",round:"",loading:t.loading}},[t._v("\n      Создать пост\n    ")])],1)],1)},[],!1,function(t){var e=l(112);e.__inject__&&e.__inject__(t)},"3cc835ca","6766e300");e.default=component.exports}};
//# sourceMappingURL=35a5c566e373c67f743d.js.map