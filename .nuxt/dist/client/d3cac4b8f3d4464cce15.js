(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{460:function(t,e,n){var content=n(602);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("e51c18aa",content,!0,{sourceMap:!1})},461:function(t,e,n){var content=n(604);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("7e920936",content,!0,{sourceMap:!1})},462:function(t,e,n){var content=n(606);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(18).default)("53a22daa",content,!0,{sourceMap:!1})},601:function(t,e,n){"use strict";var o=n(460);n.n(o).a},602:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".comment[data-v-ab24b07c]{margin-bottom:1rem}.comment-header[data-v-ab24b07c]{display:flex;justify-content:space-between;align-items:center;margin-bottom:.5rem;font-size:.8rem}.comment-header .el-icon-time[data-v-ab24b07c]{margin-right:3px}.comment-text[data-v-ab24b07c]{white-space:pre-line;margin-top:0;margin-bottom:0}",""])},603:function(t,e,n){"use strict";var o=n(461);n.n(o).a},604:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".comment-form-title[data-v-41a594dc]{margin-bottom:1rem}",""])},605:function(t,e,n){"use strict";var o=n(462);n.n(o).a},606:function(t,e,n){(t.exports=n(17)(!1)).push([t.i,".post[data-v-2c5415a2]{max-width:600px;margin-left:auto;margin-right:auto}.post-header[data-v-2c5415a2]{margin-bottom:1.5rem}.post-title[data-v-2c5415a2]{margin-bottom:1rem}.post-info[data-v-2c5415a2],.post-title[data-v-2c5415a2]{display:flex;justify-content:space-between;align-items:center}.post-info[data-v-2c5415a2]{margin-bottom:.5rem}.post-image img[data-v-2c5415a2]{width:100%;height:auto}.post-content[data-v-2c5415a2]{margin-bottom:2rem;line-height:1.4}.post-content[data-v-2c5415a2] p{margin-bottom:.5rem}.post-content[data-v-2c5415a2] ul{padding-left:20px;margin-bottom:1rem}",""])},611:function(t,e,n){"use strict";n.r(e);var o=n(16),r=(n(29),n(3)),c={name:"Comment",props:{comment:{type:Object,required:!0}}},m=(n(601),n(7)),l=Object(m.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-card",{staticClass:"comment"},[n("header",{staticClass:"comment-header"},[n("span",[t._v(t._s(t.comment.name))]),t._v(" "),n("span",[n("i",{staticClass:"el-icon-time"}),t._v(t._s(t._f("date")(t.comment.date,"date"))+"\n    ")])]),t._v(" "),n("p",{staticClass:"comment-text"},[t._v("\n    "+t._s(t.comment.text)+"\n  ")])])},[],!1,null,"ab24b07c",null).exports,d=(n(47),{name:"CommentForm",props:{postId:{type:String,required:!0}},data:function(){return{loading:!1,controls:{name:"",text:""},rules:{name:[{required:!0,message:"Имя не должно быть пустым",trigger:"blur"}],text:[{required:!0,message:"Введи ваш комментарий",trigger:"blur"}]}}},methods:{onSubmit:function(){var t=this;this.$refs.form.validate(function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}return t.loading=!0,o={postId:t.postId,name:t.controls.name,text:t.controls.text},e.prev=3,e.next=6,t.$store.dispatch("comment/create",o);case 6:r=e.sent,t.$emit("created",r),t.$message.success("Комментарий добавлен"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),t.loading=!1;case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}())}}}),v=(n(603),{components:{Comment:l,CommentForm:Object(m.a)(d,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{ref:"form",attrs:{model:t.controls,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("h2",{staticClass:"comment-form-title"},[t._v("Добавить комментарий")]),t._v(" "),n("el-form-item",{attrs:{label:"Ваше имя",prop:"name"}},[n("el-input",{model:{value:t.controls.name,callback:function(e){t.$set(t.controls,"name",e)},expression:"controls.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Текст комментария",prop:"text"}},[n("el-input",{attrs:{type:"textarea",resize:"none",rows:2},model:{value:t.controls.text,callback:function(e){t.$set(t.controls,"text",e)},expression:"controls.text"}})],1),t._v(" "),n("el-form-item",[n("el-button",{attrs:{"native-type":"submit",type:"primary",round:"",loading:t.loading}},[t._v("Добавить комментарий")])],1)],1)},[],!1,null,"41a594dc",null).exports},validate:function(t){var e=t.params;return Boolean(e.id)},head:function(){return{title:"".concat(this.post.title," | ").concat("SSR Blog")}},asyncData:function(){var t=Object(r.a)(regeneratorRuntime.mark(function t(e){var n,r,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.store,r=e.params,t.next=3,n.dispatch("post/fetchPostsById",r.id);case 3:return c=t.sent,t.next=6,n.dispatch("post/addView",c);case 6:return t.abrupt("return",{post:Object(o.a)({},c,{views:++c.views})});case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),data:function(){return{canAddComment:!0}},methods:{createCommentHandler:function(t){this.post.comments.unshift(t),this.canAddComment=!1}}}),f=(n(605),Object(m.a)(v,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("article",{staticClass:"post"},[n("header",{staticClass:"post-header",attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"post-title"},[n("h1",[t._v(t._s(t.post.title))]),t._v(" "),n("nuxt-link",{attrs:{to:"/"}},[n("i",{staticClass:"el-icon-back"})])],1),t._v(" "),n("div",{staticClass:"post-info"},[n("small",[n("i",{staticClass:"el-icon-time"}),t._v("\n        "+t._s(t._f("date")(t.post.date))+"\n      ")]),t._v(" "),n("small",[n("i",{staticClass:"el-icon-view"}),t._v("\n        "+t._s(t.post.views)+"\n      ")])]),t._v(" "),n("img",{staticClass:"post-image",attrs:{src:t.post.imageUrl,alt:t.post.title}})]),t._v(" "),n("main",{staticClass:"post-content"},[n("vue-markdown",[t._v(t._s(t.post.text))])],1),t._v(" "),n("footer",[t.canAddComment?n("comment-form",{attrs:{"post-id":t.post._id},on:{created:function(e){return t.createCommentHandler(e)}}}):t._e(),t._v(" "),t.post.comments.length?n("div",{staticClass:"comments"},t._l(t.post.comments,function(t){return n("comment",{key:t._id,attrs:{comment:t}})}),1):n("div",{staticClass:"text-center"},[t._v("\n      Комментариев нет\n    ")])],1)])},[],!1,null,"2c5415a2",null));e.default=f.exports}}]);