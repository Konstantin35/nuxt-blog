(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{459:function(t,e,r){var content=r(600);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(18).default)("3e942c8f",content,!0,{sourceMap:!1})},599:function(t,e,r){"use strict";var n=r(459);r.n(n).a},600:function(t,e,r){(t.exports=r(17)(!1)).push([t.i,".page-wrap form[data-v-886cae46]{width:600px}.mr[data-v-886cae46]{margin-right:2rem}",""])},619:function(t,e,r){"use strict";r.r(e);r(29);var n=r(3),o={name:"admin-post",middleware:["admin-auth"],head:function(){return{title:"".concat(this.post.title," | ").concat("SSR Blog")}},validate:function(t){var e=t.params;return Boolean(e.id)},layout:"admin",asyncData:function(){var t=Object(n.a)(regeneratorRuntime.mark(function t(e){var r,n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.store,n=e.params,t.next=3,r.dispatch("post/fetchAdminPostById",n.id);case 3:return o=t.sent,t.abrupt("return",{post:o});case 5:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),data:function(){return{loading:!1,controls:{text:""},rules:{text:[{required:!0,message:"Текст не должен быть пустым",trigger:"blur"}]}}},mounted:function(){this.controls.text=this.post.text},methods:{onSubmit:function(){var t=this;this.$refs.form.validate(function(){var e=Object(n.a)(regeneratorRuntime.mark(function e(r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=14;break}return t.loading=!0,e.prev=2,n={text:t.controls.text,id:t.post._id},e.next=6,t.$store.dispatch("post/update",n);case 6:t.$message.success("Пост успешно обновлен"),t.loading=!1,e.next=14;break;case 10:e.prev=10,e.t0=e.catch(2),t.loading=!1,t.$message.error("Ошибка при обновлении поста");case 14:case"end":return e.stop()}},e,null,[[2,10]])}));return function(t){return e.apply(this,arguments)}}())}}},c=(r(599),r(7)),component=Object(c.a)(o,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-wrap"},[r("el-breadcrumb",{staticClass:"mb",attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:"/admin/list"}},[t._v("\n      Посты\n    ")]),t._v(" "),r("el-breadcrumb-item",[t._v(t._s(t.post.title))])],1),t._v(" "),r("el-form",{ref:"form",attrs:{model:t.controls,rules:t.rules},nativeOn:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[r("div",{staticClass:"mb2"},[r("el-form-item",{attrs:{label:"Текст в формате .md или .html",prop:"text"}},[r("el-input",{attrs:{type:"textarea",resize:"none",rows:30},model:{value:t.controls.text,callback:function(e){t.$set(t.controls,"text",e)},expression:"controls.text"}})],1)],1),t._v(" "),r("div",{staticClass:"mb"},[r("small",{staticClass:"mr"},[r("i",{staticClass:"el-icon-time"}),t._v(" "),r("span",[t._v(t._s(t._f("date")(t.post.date)))])]),t._v(" "),r("small",[r("i",{staticClass:"el-icon-view"}),t._v(" "),r("span",[t._v(t._s(t.post.views))])])]),t._v(" "),r("el-form-item",[r("el-button",{attrs:{"native-type":"submit",type:"primary",round:"",loading:t.loading}},[t._v("\n        Обновить\n      ")])],1)],1)],1)},[],!1,null,"886cae46",null);e.default=component.exports}}]);